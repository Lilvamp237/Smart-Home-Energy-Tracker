# ğŸš€ Complete Setup & Usage Guide

## âœ… System Status Check

### Backend (Flask) - Port 5000
Your backend is **RUNNING** with:
- âœ… RDF Ontology loaded (74 triples)
- âœ… ML Model loaded (RÂ² = 0.7425)
- âœ… Database active (921 records)
- âœ… 12+ API endpoints ready

### Frontend (React) - Port 3000
Your frontend is **RUNNING** at http://localhost:3000

---

## ğŸ¯ How to Use Your Smart Home Energy Tracker

### 1. **Dashboard Page** (http://localhost:3000/)
**What you can do:**
- âœ… View real-time energy consumption
- âœ… See 24-hour ML predictions from your trained model
- âœ… Switch between time ranges (24h, 7d, 30d)
- âœ… Monitor current power usage

**Features Using Your Work:**
- **ML Model**: Predictions chart shows forecasts from `energy_predictor_model.joblib`
- **Database**: All data comes from your 921 historical records

---

### 2. **Appliances Page** (http://localhost:3000/appliances)
**What you can do:**
- âœ… Monitor 5 household devices (HVAC, Refrigerator, Washer, Water Heater, Electronics)
- âœ… View individual appliance consumption
- âœ… See energy breakdown pie chart
- âœ… Check appliance status (active/idle)

**Features Using Your Work:**
- **Database**: Household IDs mapped to appliance types
- **API Integration**: Real-time data from Flask backend

---

### 3. **Optimization Page** (http://localhost:3000/optimization)
**What you can do:**
- âœ… Get AI-powered energy-saving suggestions
- âœ… Filter by priority (high/medium/low)
- âœ… Mark suggestions as completed or dismissed
- âœ… See potential savings calculations

**Features Using Your Work:**
- **RDF Ontology**: Suggestions generated by SPARQL queries on `smart_home_ontology.ttl`
- **Time-of-Use Pricing**: Rules based on Peak/Shoulder/Off-Peak slots
- **Cost Analysis**: Savings calculated using ontology cost multipliers

**How to Test:**
1. Go to Optimization page
2. You should see suggestions like "High energy usage during peak hours..."
3. Each suggestion shows:
   - Energy savings (kWh/day)
   - Cost savings ($/day)
   - Priority level
   - Current time slot

---

### 4. **ğŸ†• Simulator Page** (http://localhost:3000/simulator) 
**What you can do:**
- âœ… **Run energy usage simulations**
- âœ… **Compare ML predictions vs simulated usage**
- âœ… **Test different usage patterns** (Normal, Peak, Off-Peak)
- âœ… **See cost analysis** with time-of-use pricing
- âœ… **Get personalized recommendations**

**Step-by-Step Usage:**

1. **Select Appliance/Household**
   - Choose from dropdown (HVAC, Refrigerator, etc.)

2. **Set Simulation Duration**
   - Use slider to select 6-48 hours
   - Default: 24 hours

3. **Choose Usage Pattern**
   - **Normal**: Typical usage throughout the day
   - **Peak**: Concentrate usage during peak hours (5 PM - 9 PM) - Higher costs!
   - **Off-Peak**: Shift usage to off-peak hours (9 PM - 7 AM) - Lower costs!

4. **Click "Run Simulation"**
   - System calls your ML model for predictions
   - Applies RDF ontology time-of-use rules
   - Calculates costs and savings

5. **View Results**
   - **Summary Cards**: Total energy, costs, potential savings
   - **Time Slot Breakdown**: Usage by Peak/Shoulder/Off-Peak
   - **Charts**: 
     - Energy comparison (ML predicted vs simulated)
     - Cost analysis by hour
   - **Recommendations**: Smart tips based on your usage pattern

**Example Simulation:**
```
Scenario: Run simulation with "Off-Peak" pattern for 24 hours
Result: See how shifting appliance usage saves money!
- Total Energy: 45.3 kWh
- Total Cost: $5.84
- Potential Savings: $2.15 (by shifting from peak)
```

**Features Using Your Work:**
- **ML Model**: Calls `/api/predictions` endpoint (your trained model)
- **RDF Ontology**: Applies time-slot rules from ontology
- **Cost Multipliers**: Peak=1.5x, Shoulder=1.2x, Off-Peak=1.0x
- **SPARQL**: Fetches current time slot info

---

### 5. **Settings Page** (http://localhost:3000/settings)
**What you can do:**
- âœ… View Phase 3 RDF Ontology details
- âœ… See ML Model performance metrics
- âœ… Check current time slot status
- âœ… View ontology statistics (74 triples, 8 rules, 3 time slots)

**Features Using Your Work:**
- **Live Time Slot Display**: Shows current slot from RDF ontology
- **Ontology Stats**: Displays loaded triples and rules
- **ML Model Info**: RÂ² score, features, algorithm details
- **Example RDF**: Shows actual ontology syntax

---

## ğŸ§ª Testing Your Implementation

### Test 1: ML Model Predictions
```bash
# In a new PowerShell terminal:
curl http://localhost:5000/api/predictions?hours=24
```
âœ… **Expected**: JSON with 24 hourly predictions from your model

### Test 2: RDF Ontology Time Slot
```bash
curl http://localhost:5000/api/v1/optimization/timeslot
```
âœ… **Expected**: Current time slot (Peak/Shoulder/Off-Peak) with cost multiplier

### Test 3: Optimization Suggestions
```bash
curl http://localhost:5000/api/optimization/suggestions
```
âœ… **Expected**: Array of suggestions based on SPARQL queries

### Test 4: Full Simulation (Frontend)
1. Open http://localhost:3000/simulator
2. Select "HVAC" appliance
3. Choose "Peak" pattern
4. Set 24 hours
5. Click "Run Simulation"

âœ… **Expected**: 
- Charts showing predictions vs simulated usage
- Cost breakdown by time slot
- Savings recommendations

---

## ğŸ’¡ Understanding Your System

### How ML Predictions Work
1. **Input**: Hour of day, day of week, time category
2. **Model**: Linear Regression with 10 features
3. **Output**: Predicted kWh consumption
4. **Used In**: Dashboard charts, Simulator comparisons

### How RDF Ontology Works
1. **Knowledge Graph**: 74 semantic triples in Turtle format
2. **Time Slots**: 3 defined periods with cost multipliers
3. **Rules**: 8 optimization rules with thresholds
4. **SPARQL Queries**: Pattern matching against current time/usage
5. **Used In**: Optimization suggestions, Simulator cost calculations

### Data Flow
```
Database (SQLite)
   â†“
Flask API (12+ endpoints)
   â†“
React Frontend (5 pages)
   â†“
User Interactions

Parallel:
ML Model (predictions) â†â†’ RDF Ontology (rules) â†’ Combined Insights
```

---

## ğŸ¨ Interactive Features

### Dashboard
- **Click time range buttons**: Switch between 24h, 7d, 30d views
- **Hover charts**: See exact values at each time point

### Appliances
- **Click appliance cards**: Navigate to detailed usage view
- **Hover pie chart**: See percentage breakdown

### Optimization
- **Click filter buttons**: Show all/high/medium/low priority
- **Click checkboxes**: Mark suggestions as completed
- **Click "Dismiss"**: Remove suggestions

### ğŸ†• Simulator (Most Interactive!)
- **Drag slider**: Change simulation duration
- **Click pattern buttons**: Switch usage scenarios
- **Select appliances**: Change which device to simulate
- **Run multiple simulations**: Compare different patterns
- **Interactive charts**: Hover for detailed tooltips

### Settings
- **Live time slot card**: Updates with current system time
- **Expandable sections**: Click to view more details

---

## ğŸ”§ Troubleshooting

### No Optimization Suggestions?
**Cause**: Using historical data (2013 timestamps)
**Solution**: Already fixed! Backend now uses most recent 100 readings

### Frontend Not Loading Data?
1. Check backend is running: http://localhost:5000
2. Check frontend is running: http://localhost:3000
3. Open browser console (F12) to see API calls

### CORS Errors?
**Solution**: Already configured! `CORS(app)` in backend enables all origins

### sklearn Version Warning?
**Impact**: Non-critical for Linear Regression
**Optional Fix**: Retrain model with current sklearn version

---

## ğŸ“Š What Each Page Demonstrates

| Page | Phase 1 (DB) | Phase 2 (ML) | Phase 3 (RDF) |
|------|--------------|--------------|---------------|
| Dashboard | âœ… Historical data | âœ… Predictions | âŒ |
| Appliances | âœ… Device data | âŒ | âŒ |
| Optimization | âœ… Usage data | âŒ | âœ… SPARQL rules |
| **Simulator** | âœ… Historical data | âœ… Predictions | âœ… Cost rules |
| Settings | âœ… DB stats | âœ… Model stats | âœ… Ontology info |

**Simulator = Complete Integration!** ğŸ‰

---

## ğŸš€ Quick Start Commands

### Start Everything
```powershell
# Terminal 1 - Backend
cd backend
.\venv\Scripts\Activate.ps1
python app.py

# Terminal 2 - Frontend (already running)
# Just open http://localhost:3000
```

### Stop Everything
```powershell
# Stop Flask: Ctrl+C in backend terminal
# Stop React: Ctrl+C in frontend terminal
```

---

## ğŸ¯ Demo Scenarios

### Scenario 1: Show ML Model
1. Go to Dashboard
2. Point to "Energy Forecast" chart
3. Explain: "These predictions come from my trained Linear Regression model"

### Scenario 2: Show RDF Ontology
1. Go to Optimization
2. Show suggestions appearing
3. Go to Settings â†’ Phase 3 section
4. Explain: "These rules come from my semantic knowledge graph with 74 triples"

### Scenario 3: Show Complete Integration
1. Go to Simulator
2. Run simulation with "Off-Peak" pattern
3. Show:
   - ML predictions (Phase 2)
   - Cost calculations (Phase 3 RDF rules)
   - Savings recommendations (Phase 3 SPARQL)
   - Time slot breakdown (Phase 3 ontology)

---

## ğŸ“ Summary

âœ… **Backend Connected**: Flask serving all endpoints
âœ… **Frontend Connected**: React consuming APIs
âœ… **ML Model Active**: Predictions working
âœ… **RDF Ontology Active**: Rules generating suggestions
âœ… **New Simulator Added**: Interactive usage testing
âœ… **All 3 Phases Integrated**: Database + ML + Semantic Web

**Next**: Open http://localhost:3000/simulator and start simulating! ğŸš€

---

## ğŸ“ Key Takeaways

Your system now demonstrates:
1. **Full-stack development** (React + Flask)
2. **Machine Learning deployment** (scikit-learn model serving predictions)
3. **Semantic web technologies** (RDF ontology + SPARQL queries)
4. **Time-series data analysis** (Historical energy patterns)
5. **Interactive data visualization** (Recharts for all graphs)
6. **RESTful API design** (12+ well-structured endpoints)
7. **Real-time simulations** (What-if scenario analysis)

**You've built a production-quality smart home energy management system!** ğŸ‘
